package me.kansio.client.modules.impl.exploit;

import dorkbox.messageBus.annotations.Subscribe;
import me.kansio.client.event.impl.UpdateEvent;
import me.kansio.client.modules.api.ModuleCategory;
import me.kansio.client.modules.impl.Module;
import me.kansio.client.property.value.ModeValue;
import net.minecraft.item.ItemFood;
import net.minecraft.item.ItemPotion;
import net.minecraft.network.play.client.C03PacketPlayer;

public class FastUse extends Module {

    private ModeValue modeValue = new ModeValue("Mode", this, "Verus");

    public FastUse() {
        super("Fast Use", ModuleCategory.EXPLOIT);
    }

    @Subscribe
    public void onUpdate(UpdateEvent event) {
        if (mc.thePlayer.isUsingItem() && mc.thePlayer.isCollidedVertically && mc.thePlayer.getHeldItem().getItem() instanceof ItemFood || mc.thePlayer.isUsingItem() && mc.thePlayer.getHeldItem().getItem() instanceof ItemPotion) {

            switch (modeValue.getValueAsString()) {
                case "Verus": {
                    if (mc.thePlayer.isUsingItem()) {
                        if (mc.thePlayer.onGround) {
                            if (mc.thePlayer.ticksExisted % 4 == 0) {
                                for (int i = 0; i < 8; i++) {
                                    double x = mc.thePlayer.posX;
                                    double y = mc.thePlayer.posY + 1.0E-9;
                                    double z = mc.thePlayer.posZ;
                                    mc.thePlayer.sendQueue.addToSendQueue(new C03PacketPlayer.C06PacketPlayerPosLook(x, y, z, mc.thePlayer.rotationYaw, mc.thePlayer.rotationPitch, true));
                                }
                            }
                        }
                    }
                    break;
                }

            }
        }
    }

}
