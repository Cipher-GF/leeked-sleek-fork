package me.kansio.client.modules.impl.exploit.disabler.watchdog;

import me.kansio.client.event.impl.PacketEvent;
import me.kansio.client.event.impl.UpdateEvent;
import me.kansio.client.modules.impl.exploit.disabler.DisablerMode;
import me.kansio.client.utils.network.PacketUtil;
import net.minecraft.entity.player.PlayerCapabilities;
import net.minecraft.network.Packet;
import java.util.*;

public class WatchdogTimer extends DisablerMode {
    public WatchdogTimer() {
        super("Watchdog Timer");
    }

    LinkedList<Packet> queue = new LinkedList<>();

    @Override
    public void onUpdate(UpdateEvent event) {
        if (mc.thePlayer.ticksExisted > 144) {
            if (mc.thePlayer.ticksExisted % 20 == 0) {
                PacketUtil.sendPacketNoEvent(queue.poll());
            }
        }
    }

    @Override
    public void onPacket(PacketEvent event) {
        if (mc.thePlayer.ticksExisted < 144) {
            event.setCancelled(true);
            queue.add(event.getPacket());
        }
    }

}
